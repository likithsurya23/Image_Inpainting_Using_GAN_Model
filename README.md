
---

# Image Inpainting Using Generative Adversarial Networks (GANs)

This project is a full-stack **Image Inpainting Using Generative Adversarial Networks (GANs)** application with:

* **React + Vite Frontend** for an interactive, step-based UI
* **Django Backend** that runs a trained **GAN generator** (`generator_final.pth`)
* Custom **Mask Canvas** to draw regions to remove and inpaint

---

##  Table of Contents

1. [Frontend (React + Vite)](#frontend-react--vite)

   * [Frontend Structure](#frontend-structure)
   * [Frontend Setup](#frontend-setup)
   * [Frontend Workflow](#frontend-workflow)
2. [Backend (Django)](#backend-django)

   * [Backend Setup](#backend-setup)
   * [Backend Structure](#backend-structure)
   * [API Endpoints](#api-endpoints)
3. [Environment Variables](#environment-variables)
4. [Features](#features)
5. [Testing](#testing)
6. [Deployment](#deployment)
7. [Contributing](#contributing)
8. [License](#license)

---

## Frontend (React + Vite)

### Frontend Structure

```text
img_frontend/
‚îú‚îÄ‚îÄ dist/                    # Production build (generated by Vite)
‚îÇ   ‚îî‚îÄ‚îÄ assets/
‚îú‚îÄ‚îÄ node_modules/            # NPM dependencies
‚îú‚îÄ‚îÄ public/                  # Static public assets
‚îî‚îÄ‚îÄ src/
    ‚îú‚îÄ‚îÄ api/
    ‚îÇ   ‚îî‚îÄ‚îÄ inpaint.js       # inpaintImage() ‚Äì calls backend /api/inpaint/
    ‚îú‚îÄ‚îÄ components/
    ‚îÇ   ‚îú‚îÄ‚îÄ HistorySidebar/  # Shows list of previous inpaint jobs
    ‚îÇ   ‚îú‚îÄ‚îÄ ImageUploader/   # Component to upload images
    ‚îÇ   ‚îú‚îÄ‚îÄ IterationControls/ # Slider/controls for iterations
    ‚îÇ   ‚îú‚îÄ‚îÄ MaskCanvas/      # Canvas to draw mask over image
    ‚îÇ   ‚îî‚îÄ‚îÄ ResultViewer/    # Displays inpainted result
    ‚îú‚îÄ‚îÄ styles/              # Global / component styles (Tailwind / CSS)
    ‚îî‚îÄ‚îÄ App.jsx              # Main parent component (multi-step flow)
```

#### Core Parent Component: `App.jsx`

The `App` component wires everything together:

* **State managed:**

  * `originalImage` ‚Äì the uploaded image
  * `maskData` ‚Äì mask drawn on the image
  * `resultImage` ‚Äì inpainted image from backend
  * `iterations` ‚Äì number of iterations for processing
  * `isProcessing` ‚Äì loading status during API call
  * `jobId` ‚Äì ID returned from backend
  * `history` ‚Äì array of past inpainting jobs (up to 10)
  * `currentStep` ‚Äì controls UI flow (`1..4`)

* **Steps:**

  1. **Upload Image** ‚Äì `ImageUploader`
  2. **Draw Mask** ‚Äì `MaskCanvas`
  3. **Configure** ‚Äì `IterationControls` + preview
  4. **View Result** ‚Äì `ResultViewer` + actions

* **HistorySidebar:**

  * Shows previous jobs with:

    * original, mask, result, iterations, timestamp
  * Selecting a history item restores its data into the workspace.

---

### Frontend Setup

1. **Go to the frontend directory:**

   ```bash
   cd img_frontend
   ```

2. **Install dependencies:**

   ```bash
   npm install
   ```

3. **Set API base URL (optional but recommended):**

   Create `.env` or `.env.local` in `img_frontend`:

   ```dotenv
   VITE_API_BASE_URL=http://localhost:8000/api
   ```

   Example usage in `src/api/inpaint.js`:

   ```js
   const API_BASE_URL = import.meta.env.VITE_API_BASE_URL || 'http://localhost:8000/api'
   ```

4. **Run the development server:**

   ```bash
   npm run dev
   ```

   By default (Vite):

   ```text
   http://localhost:5173
   ```

5. **Build for production (optional):**

   ```bash
   npm run build
   ```

   The production build will be in the `dist/` folder.

---

### Frontend Workflow

Once the app is running:

1. **Step 1 ‚Äì Upload Image**

   * The **Upload Your Image** screen uses `ImageUploader`.
   * After upload, `originalImage` is set and `currentStep` moves to **2**.

2. **Step 2 ‚Äì Draw Mask**

   * `MaskCanvas` displays the uploaded image.
   * You draw over unwanted objects; this updates `maskData`.
   * Click **Continue ‚Üí** to go to step 3 (button disabled until a mask exists).

3. **Step 3 ‚Äì Configure**

   * `IterationControls` lets you change `iterations`.
   * Preview area shows:

     * Original image
     * Original + mask overlay (‚ÄúAreas to Remove‚Äù)
   * Click **Start Inpainting ‚Üí** to call `inpaintImage(originalImage, maskData, iterations)`.

4. **Step 4 ‚Äì View Result**

   * While waiting, `isProcessing` is `true` and UI shows a ‚Äúprocessing‚Äù message.
   * On success:

     * `resultImage` is displayed in `ResultViewer`.
     * A history item is created and added to `history`.
   * Buttons let you:

     * ‚úèÔ∏è Edit Mask (back to Step 2)
     * üÜï New Image (reset to Step 1)
     * ‚öôÔ∏è Change Settings (back to Step 3)

5. **History Sidebar**

   * Shows previous jobs with their images and settings.
   * Clicking a job reloads `originalImage`, `maskData`, `resultImage`, `iterations`, and jumps to Step 4.
   * Clear History button wipes `history`, `jobId`, and `resultImage`.

---

## Backend (Django)


### Backend Setup

1. **Go to the backend directory:**

   ```bash
   cd img_backend
   ```

2. **Create and activate virtual environment:**

   ```bash
   python -m venv env

   # Windows
   env\Scripts\activate

   # Linux / macOS
   source env/bin/activate
   ```

3. **Install backend dependencies:**

   ```bash
   pip install -r requirements.txt
   ```

4. **Place the trained model file:**

   Put your trained GAN generator (e.g. `generator_final.pth`) inside the backend `models` directory:

   ```text
   img_backend/
   ‚îî‚îÄ‚îÄ models/
       ‚îî‚îÄ‚îÄ generator_final.pth
   ```

   In your ML/inference code (e.g. `apps/ml/...`), load this file to initialize the model used for inpainting.

5. **Apply migrations:**

   ```bash
   python manage.py migrate
   ```

6. **Run the backend server:**

   ```bash
   python manage.py runserver
   ```

   Default URL:

   ```text
   http://localhost:8000
   ```

   The API base used by frontend is typically:

   ```text
   http://localhost:8000/api
   ```

---
### Backend Structure

```text
img_backend/
‚îú‚îÄ‚îÄ apps/
‚îÇ   ‚îú‚îÄ‚îÄ migrations/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ __pycache__/
‚îÇ   ‚îú‚îÄ‚îÄ ml/                 # ML / inpainting logic (model loading, inference)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ __pycache__/
‚îÇ   ‚îî‚îÄ‚îÄ __pycache__/
‚îú‚îÄ‚îÄ img_backend/            # Django project package
‚îÇ   ‚îî‚îÄ‚îÄ __pycache__/
‚îú‚îÄ‚îÄ media/
‚îÇ   ‚îî‚îÄ‚îÄ inpaint/
‚îÇ       ‚îú‚îÄ‚îÄ masks/          # Saved mask images
‚îÇ       ‚îú‚îÄ‚îÄ originals/      # Uploaded original images
‚îÇ       ‚îî‚îÄ‚îÄ results/        # Generated outputs
‚îú‚îÄ‚îÄ models/                 # Contains generator_final.pth and other model files
‚îú‚îÄ‚îÄ manage.py
‚îî‚îÄ‚îÄ requirements.txt
```

Typical expected files (not fully expanded):

* `img_backend/settings.py` ‚Äì Django settings (including `MEDIA_ROOT`, `MEDIA_URL`)
* `img_backend/urls.py` ‚Äì Includes `path("api/inpaint/", ...)`
* `apps/views.py` or `apps/api/views.py` ‚Äì View functions or DRF views handling `/api/inpaint/`
* `apps/ml/inference.py` ‚Äì (example) Logic for loading `generator_final.pth` and running inpainting

---

### API Endpoints

> **Base URL:** `http://localhost:8000/api/`

#### `POST /api/inpaint/`

* **Purpose:**
  Perform AI-based image inpainting with the provided **original image** and **mask**, using the GAN generator.

* **Expected Request (common pattern):**
  `multipart/form-data` with fields like:

  * `image` ‚Äì original image (file or base64-encoded string)
  * `mask` ‚Äì mask image (file or base64-encoded string)
  * `iterations` ‚Äì integer (e.g. `2`)

* **Example Response (JSON):**

  ```json
  {
    "job_id": "some-unique-id",
    "result_image": "data:image/png;base64,....",
    "processing_time": 5.2
  }
  ```

The frontend‚Äôs `inpaintImage()` in `src/api/inpaint.js` wraps this call and returns `{ result_image, job_id }` which is then used in `App.jsx`.

---

## Environment Variables

### Frontend (`img_frontend/.env` or `.env.local`)

```dotenv
VITE_API_BASE_URL=http://localhost:8000/api
```

### Backend (`img_backend/.env` ‚Äì optional)

```dotenv
SECRET_KEY=your_secret_key_here
DEBUG=True
ALLOWED_HOSTS=localhost,127.0.0.1
# DATABASE_URL=postgres://username:password@localhost:5432/dbname  (if using Postgres)
```

Make sure `settings.py` reads these values if you use a library like `django-environ`.

---

## Features

* üß© **Step-based UI**

  * Upload ‚Üí Draw Mask ‚Üí Configure ‚Üí View Result
  * Visual progress indicator with completed/active/pending steps

* üé® **Custom Mask Drawing**

  * Draw directly on the image with `MaskCanvas`
  * Mask is previewed as an overlay before inpainting

* ü§ñ **GAN-based Inpainting**

  * Backend loads `generator_final.pth`
  * Removes unwanted content and fills realistically

* üìú **History Sidebar**

  * Last 10 inpaint jobs stored
  * Click to restore any previous job (original, mask, result)

* üß™ **Configurable Iterations**

  * Tune the number of iterations to improve or speed up results

* üßº **Clean UI**

  * Modern layout, gradients, rounded cards, Tailwind-like styles

---

## Testing

### Frontend Tests

From `img_frontend`:

```bash
npm test
```

Recommended:

* Test `App` flow (step transitions, validation)
* Test each component (`ImageUploader`, `MaskCanvas`, `ResultViewer`, etc.)
* Mock `inpaintImage` to simulate backend responses

### Backend Tests

From `img_backend`:

```bash
python manage.py test
```

Suggested tests:

* `/api/inpaint/` endpoint (valid request, invalid request, error handling)
* Image & mask validation
* Model loading & inference flow (can mock heavy parts)

---

## Deployment

### Frontend Deployment

1. Build:

   ```bash
   cd img_frontend
   npm run build
   ```

2. Deploy `dist/` on:

   * Vercel
   * Netlify
   * Any static hosting (or behind Nginx/Apache)

3. Ensure `VITE_API_BASE_URL` points to your **production backend** URL.

### Backend Deployment

* Use platforms like:

  * Render / Railway / Heroku-like services
  * Docker + your own VPS (AWS EC2, DigitalOcean, etc.)
  * Gunicorn + Nginx

Key considerations:

* `DEBUG=False`
* `ALLOWED_HOSTS` updated
* Persistent storage for `media/inpaint/`
* Proper environment variables (`SECRET_KEY`, DB settings, etc.)

---

## Contributing

1. Fork this repo
2. Create a feature branch: `git checkout -b feature/my-feature`
3. Commit your changes
4. Open a Pull Request with a clear description

UI/UX changes, new model support, performance improvements, and new tools (e.g., eraser brush, multiple masks) are all welcome.

---


# MIT License

Copyright (c) 2025 **Likith D**

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the ‚ÄúSoftware‚Äù), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED ‚ÄúAS IS‚Äù, WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
OTHER DEALINGS IN THE SOFTWARE.

---
